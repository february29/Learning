<import src="/components/page-head.vue.wxml" /><template name="34178cc6"><view class="_view 34178cc6"><template data="{{...$root['0'], ...$root[$kk+'34178cc6-0'],$root}}" is="7ec75528"></template><view class="_view 34178cc6 uni-padding-wrap uni-common-mt"><view class="_view 34178cc6">本蓝牙协议只支持低功耗蓝牙协议ble。如果想连接非ble蓝牙设备，请在社区搜索 Native.js 蓝牙。</view><view class="_view 34178cc6 uni-btn-v"><button type="primary" disabled="{{disabled[0]}}" bindtap="handleProxy" data-eventid="{{'34178cc6-0'}}" data-comkey="{{$k}}" class="_button 34178cc6">初始化蓝牙模块</button><view wx:if="{{!adapterState.available}}" class="_view 34178cc6">{{ '蓝牙适配器不可用,请初始化蓝牙模块' }}</view><button type="primary" loading="{{searchLoad}}" disabled="{{disabled[1]}}" bindtap="handleProxy" data-eventid="{{'34178cc6-1'}}" data-comkey="{{$k}}" class="_button 34178cc6">开始搜索蓝牙设备</button><button type="primary" disabled="{{disabled[2]}}" bindtap="handleProxy" data-eventid="{{'34178cc6-2'}}" data-comkey="{{$k}}" class="_button 34178cc6">停止搜索蓝牙设备</button><button type="primary" loading="{{newDeviceLoad}}" disabled="{{disabled[3]}}" bindtap="handleProxy" data-eventid="{{'34178cc6-3'}}" data-comkey="{{$k}}" class="_button 34178cc6">选择设备</button><view wx:if="{{equipment.length > 0}}" class="_view 34178cc6">{{
					(connected ? '已连接设备' : '已选择设备') +
						' : ' +
						equipment[0].name +
						' (' +
						equipment[0].deviceId +
						')'
				}}</view><button type="primary" disabled="{{disabled[4]}}" bindtap="handleProxy" data-eventid="{{'34178cc6-4'}}" data-comkey="{{$k}}" class="_button 34178cc6">连接蓝牙设备</button><button type="primary" disabled="{{disabled[5]}}" bindtap="handleProxy" data-eventid="{{'34178cc6-5'}}" data-comkey="{{$k}}" class="_button 34178cc6">选择设备服务</button><view wx:if="{{servicesData.length > 0}}" class="_view 34178cc6">已选服务uuid：{{ servicesData[0].uuid }}</view><button type="primary" disabled="{{disabled[6]}}" bindtap="handleProxy" data-eventid="{{'34178cc6-6'}}" data-comkey="{{$k}}" class="_button 34178cc6">获取服务的特征值</button><view wx:if="{{characteristicsData.length > 0}}" class="_view 34178cc6"><view class="_view 34178cc6 uni-list_name">uuid:{{ characteristicsData[0].uuid }}</view><view class="_view 34178cc6 uni-list_item">是否支持 read 操作:{{ characteristicsData[0].properties.read }}</view><view class="_view 34178cc6 uni-list_item">是否支持 write 操作:{{ characteristicsData[0].properties.write }}</view><view class="_view 34178cc6 uni-list_item">是否支持 notify 操作:{{ characteristicsData[0].properties.notify }}</view><view class="_view 34178cc6 uni-list_item">是否支持 indicate 操作:{{ characteristicsData[0].properties.indicate }}</view></view><button type="primary" disabled="{{disabled[9]}}" bindtap="handleProxy" data-eventid="{{'34178cc6-7'}}" data-comkey="{{$k}}" class="_button 34178cc6">断开蓝牙设备</button><button type="primary" disabled="{{disabled[10]}}" bindtap="handleProxy" data-eventid="{{'34178cc6-8'}}" data-comkey="{{$k}}" class="_button 34178cc6">关闭蓝牙模块</button></view></view><view wx:if="{{maskShow}}" class="_view 34178cc6 uni-mask" catchtouchmove="handleProxy" bindtap="handleProxy" data-eventid="{{'34178cc6-11'}}" data-comkey="{{$k}}"><scroll-view class="_scroll-view 34178cc6 uni-scroll_box" scroll-y catchtouchmove="handleProxy" catchtap="handleProxy" data-eventid="{{'34178cc6-10'}}" data-comkey="{{$k}}"><view class="_view 34178cc6 uni-title">已经发现{{ list.length }}{{ showMaskType === 'device' ? '台设备' : '个服务' }}:</view><view class="_view 34178cc6 uni-list-box" wx:key="index" key="{{index}}" bindtap="handleProxy" data-eventid="{{'34178cc6-9-'+index}}" data-comkey="{{$k}}" wx:for="{{list}}" wx:for-index="index" wx:for-item="item"><view wx:if="{{showMaskType === 'device'}}" class="_view 34178cc6"><view class="_view 34178cc6 uni-list_name">{{ item.name || item.localName }}</view><view class="_view 34178cc6 uni-list_item">信号强度:{{ item.RSSI }}dBm</view><view class="_view 34178cc6 uni-list_item">UUID:{{ item.deviceId }}</view></view><view wx:if="{{showMaskType === 'service'}}" class="_view 34178cc6"><view class="_view 34178cc6 uni-list_item" style="line-height:2.2;">UUID: {{ item.uuid }}<text wx:if="{{showMaskType === 'service'}}" class="_text 34178cc6">{{ item.isPrimary ? '（主服务）' : '' }}</text></view></view><view wx:if="{{showMaskType === 'characteristics'}}" class="_view 34178cc6"><view class="_view 34178cc6 uni-list_name">uuid:{{ item.uuid }}</view><view class="_view 34178cc6 uni-list_item">是否支持 read 操作:{{ item.properties.read }}</view><view class="_view 34178cc6 uni-list_item">是否支持 write 操作:{{ item.properties.write }}</view><view class="_view 34178cc6 uni-list_item">是否支持 notify 操作:{{ item.properties.notify }}</view><view class="_view 34178cc6 uni-list_item">是否支持 indicate 操作:{{ item.properties.indicate }}</view></view></view></scroll-view></view></view></template>